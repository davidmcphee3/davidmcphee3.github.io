<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
   <meta name="keywords" content="" />
   <meta name="description" content="" />
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>David McPhee's Personal Homepage</title>
   <link rel="shortcut icon" type="image/png" href="includes/favicon.png">
   <link href="includes/main.css" rel="stylesheet" type="text/css" media="screen" />
</head>
<body style="background-color:#121212;">
   <div id="content">
       <div id="nav">
           <ul>
               <li><a href="/projects">Back To Projects</a></li>
           </ul>
       </div>
       <!-- End Header $include_path/header.html -->
       <div class="main">
           <div class="bTitle"><p><u><strong>But What is BPSK?</strong></u></p></div>
           <img class="bImg" src="/includes/other/bpsk/thumbnail.png" alt="Thumbnail for BPSK"></img>
           <p>
            <p>
            Binary Phase Shift Keying (BPSK) is a modulation technique used in satellite communications, Bluetooth, and other applications. 
            Modulation works by combining a carrier signal with a stream of digital bits. The resulting spectrum (as shown in the thumbnail) 
            demonstrates that the BPSK signal occupies more than just the carrier frequency. It appears as a set of rolling hills with nulls 
            (zero-crossings) at the symbol rate. We can rebuild this spectrum in Python and explain why:
            <ol>
              <li>The spectrum is wider than just the carrier frequency.</li>
              <li>What is actually contained in the rolling hills.</li>
              <li>Why there are nulls at the symbol rate offset from the carrier frequency.</li>
            </ol>
        </p>
            We will start by looking at the signals in the time domain and explaining how each part contributes to the BPSK signal. 
            We will then discuss convolution and Fourier Transforms as we convert to the frequency domain. Finally, we will rebuild 
            the BPSK wave and, in doing so, understand its key characteristics. After the waveform is built, some questions will arise, 
            such as: what about higher forms of modulation, modulation index, subcarriers, etc.

            <div class="bSub"><p><b>The Time Domain</b></p></div>

            As mentioned previously, modulation is the act of combining a carrier wave with a data wave. There are numerous benefits 
            to doing this, such as specifying the frequency of your data. Imagine if 10 people had Bluetooth headphones and their phones 
            were all transmitting data to their headphones on the same frequencyâ€”this would lead to confusion and mixed signals. By 
            modulating our data to a specific frequency, we can avoid these issues. 
        </p>
            The carrier wave can be any sine wave we choose. The exact frequency isn't important for demonstration purposes and will 
            change based on which aspects of the signal I am trying to emphasize. Here is an example of a carrier sine wave:
            <img class="bImg" src="/includes/other/bpsk/img1.png" alt="Zoomed-in sine wave"></img>
            We can see that the period of the sine wave is 0.2 seconds (how long it takes for the wave to repeat). Therefore, the frequency 
            of this wave is 5 Hz. 
        </p>
            The data wave is a series of binary numbers, 0s and 1s. We will encode this data such that the 0s are -1s (Non-return to zero), 
            but it will still appear as a normal set of 0s and 1s. Real-world binary data has two key characteristics: it is infinitely long, 
            and it is random. These might seem like extreme assumptions, but typical phone plans have data speeds on the order of Mbps, 
            meaning 1,000,000 bits per second. Even over 1 minute, over 60,000,000 bits of data are sent. With 60 million bits, we can 
            easily make the jump to "infinite." Data is random in the same way that the digits of pi are random. Yes, we can calculate 
            the digits of pi, but we can also find any string of numbers we want in pi. So, sufficiently long binary data will contain 
            at least example patterns of [1,0,1,0], [1,1,0,0,1,1,0,0], [1,1,0,1,1,0], etc. Here is an example of some NRZ binary data:
            <img class="bImg" src="/includes/other/bpsk/img2.png" alt="Zoomed-in NRZ binary wave"></img>

            The BPSK wave is the multiplication of the carrier wave and the data wave. If the data wave was all 1s, the BPSK wave 
            would look identical to the carrier wave. If the data wave was all 0s, the BPSK wave would be an upside-down version of 
            the carrier wave. Another way to think about this is that when the binary data is -1, the wave is shifted 180 degrees. 
            This is where the name "Binary Phase Shift Keying" comes from.
            <img class="bImg" src="/includes/other/bpsk/img3.png" alt="BPSK of all 1s"></img>
            <img class="bImg" src="/includes/other/bpsk/img4.png" alt="BPSK of all 0s"></img>

            Now let's look at what happens when we use a combination of 0s and 1s for the data. We can see that as the data flips between 
            -1 and 1, the sine wave is shifted forward and backward 180 degrees. 
            <img class="bImg" src="/includes/other/bpsk/img5.png" alt="Random BPSK, pi/2 crossing"></img>

            There are two more aspects of the BPSK wave to discuss. The first is how often we change between -1 and 1, and the second is 
            when we change between -1 and 1. The answer to the first question is called the symbol rate. We can see that the data changes 
            from a 1 to a -1 at the 0.1 second mark and then back to 1 at the 0.2 second mark. This shows that our symbol rate is 0.1 seconds. 
            We can change when the binary data changes the BPSK by shifting our carrier phase. This leads to some interesting BPSK spectra, 
            but the information carried is still the same:
            <img class="bImg" src="/includes/other/bpsk/img6.png" alt="Random BPSK, 0 crossing"></img>
            <img class="bImg" src="/includes/other/bpsk/img7.png" alt="Random BPSK, pi/3 crossing"></img>

            We have successfully built a BPSK signal. However, this does not look like the thumbnail. That is because this is in the time 
            domain, and we need to convert to the frequency domain. We need to convert the carrier wave and the data wave to the frequency 
            domain using Fourier Transforms, and then we need to convolve them together. We use convolution rather than multiplication 
            because of the convolution theorem, which states that multiplication in the time/frequency domain is convolution in the 
            frequency/time domain.

            <div class="bSub"><p><b>The Frequency Domain (Square Waves)</b></p></div>
            The frequency domain represents which frequencies are present in a signal. In this domain, the x-axis is frequency rather than 
            time. For a sine wave (a single frequency signal), the plot in the frequency domain only has one point, and that is at the 
            frequency of the sine wave.
            <img class="bImg" src="/includes/other/bpsk/img8.png" alt="Carrier FFT"></img>
            You will notice that there are actually two peaks, one at 2500 Hz and another at -2500 Hz. That is because a negative frequency 
            looks the same as a positive frequency, although negative frequencies do not exist. It is more common to show Fourier transform 
            results starting at zero.
            <img class="bImg" src="/includes/other/bpsk/img9.png" alt="Carrier FFT starting at zero"></img>
            In summary, the Fourier Series shows the frequency components that make up the wave.
        </p>
            What does the Fourier Series of our data wave look like? Let's start with the simple case where our data is alternating 0s and 1s, 
            a square wave. 
            <div class="bSub"><p><b>A Dive into the Fourier Series of a Square Wave</b></p></div>
            A square wave has a Fourier Series that has energy at the symbol frequency, and every odd harmonic (multiple) of the 
            symbol frequency. For a symbol frequency of 25 (and thus a symbol rate of 50), we should expect peaks at 25, 75, 125, etc. 
            <img class="bImg" src="/includes/other/bpsk/img10.png" alt="A Square Wave with Symbol Frequency 25"></img>
            <img class="bImg" src="/includes/other/bpsk/img11.png" alt="FFT of a Square Wave with Symbol Frequency 25"></img>
            What does this really mean? It means that 
            
            f<img class="bEqu" src="/includes/other/bpsk/equ1.png" alt="Fourier Series"></img>

            ... equals a square wave.
    </p>
            To fully appreciate this concept, we need to derive the formula using the Fourier Series equation. If you recall, the 
            Fourier Series is an expansion of a periodic function in terms of infinite sums of sines and cosines. (I would love 
            to prove this formula, but we really don't have time...)
            
            <img class="bEqu" src="/includes/other/bpsk/equ2.png" alt="Fourier Series"></img>

            Where the variables are defined as 

            <img class="bEqu" src="/includes/other/bpsk/equ3.png" alt="Variables of the Fourier Series"></img>

            Mathematically, we can describe a square wave as

            <img class="bEqu" src="/includes/other/bpsk/equ4.png" alt="Piecewise Function of a Square Wave"></img>

            To start solving the coefficients, we can start with a0. This equation is the integral from -L to L, multiplied
            by a constant. Visually, we can see from the plot (where L = 0.04) that for half a period (-L to 0), the plot 
            is negative, and for the other half, it is positive. This means that the net area is 0, and therefore, in the integral, 
            the result is 0, and finally, a0 = 0. One coefficient down, two infinities to go.
        </p>
            Starting with <i>an</i>, we can split the integral into two parts: one for the negative piecewise (where 
            <i>f(x) = -1</i>) and the positive piecewise (<i>f(x) = 1</i>).

            <img class="bEqu" src="/includes/other/bpsk/equ5.png" alt="Fourier Series A0 definition"></img>
            <img class="bEqu" src="/includes/other/bpsk/equ6.png" alt="Fourier Series an solved"></img>
            
            Therefore, all <i>an</i> are equal to zero, and thus there are no cosines in the Fourier Series of a 
            square wave.
        </p>
            Moving on to the <i>bn</i> coefficients, we follow the same logic in solving these:
            <img class="bEqu" src="/includes/other/bpsk/equ7.png" alt="Fourier Series bn solved"></img>

            Something interesting is noted for this step. Since <i>n</i> is all natural numbers and cosine is periodic about 2 pi, we 
            end up with just two options for <i>bn</i>. The first case is where <i>n</i> is odd, in which case the cosine reduces to -1. 
            In the even case, the cosine reduces to 1. Simplifying further:
            <img class="bEqu" src="/includes/other/bpsk/equ8.png" alt="Fourier Series bn piecewise"></img>

            Putting these back into the Fourier Series equation:
            <img class="bEqu" src="/includes/other/bpsk/equ8.png" alt="Fourier Series of a Square"></img>

            If we start to plot the individual components of the Fourier Series, we see that as <i>n</i> increases, the frequency of the 
            component increases, but each sine wave continues to have a null at <i>L, -L, 2*L, -2*L, etc.</i> 
            <img class="bImg" src="/includes/other/bpsk/img12.png" alt="Fourier Series of a Square wave, compartmentalized"></img>

            As we add these sine waves together, the shape of the square wave begins to form. The Fourier Series <i>n</i>
            increases in each plot from 1, 5, 9, to 13. Two important notes about this graph: we see that the nulls of the 
            fundamental frequency persist, and two, the entire plot consists of sine waves with increasing frequency, 
            1/L, 3/L, 5/L. 
            <img class="bImg" src="/includes/other/bpsk/img13.png" alt="Fourier Series of a Square wave, increasing size of n"></img>

            As we convert the time series of a square wave to the frequency domain, we expect to see tones at 1/L, 3/L, 5/L, etc. Which 
            is what we saw at the beginning of this section for an L of 0.04, so the tones are 25, 75, 125, etc.
            <img class="bImg" src="/includes/other/bpsk/img14.png" alt="Square Wave FFT"></img>

            Now that we have created a square wave, we are able to discuss higher order modulations like BPSK, QPSK, etc. 
            Keep an eye on what happens to the frequency components as we increase the number of bits per symbol.

            <div class="bSub"><p><b>The End (Not Quite)</b></p></div>
            Some interesting questions come out of this solution: can we send more than 1 bit per symbol (yes, it's called QPSK), 
            and how does the symbol rate affect bandwidth and energy?
        </p>
    </div>
</body>
</html>
